#:import TextInput kivy.uix.textinput.TextInput
#:import CodeInput kivy.uix.codeinput.CodeInput
#:import TextLexer pygments.lexers.special.TextLexer
#:import RstDocument kivy.uix.rst.RstDocument
#:import ScrollView kivy.uix.scrollview.ScrollView
#:import Label kivy.uix.label.Label
#:import get_current_time etmKv.data.get_current_time


<BoxIOWidget>:

    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: .8, .8, .8, 1
            Rectangle:
                # self here refers to the widget i.e FloatLayout
                pos: self.pos
                size: self.size
        padding: 3
        spacing: 3
        ScrollView:
            id: scrlv
            focus: False
            CodeInput:
                id: output
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                focus: False
                lexer: TextLexer()
                text: input.init()
                focus: False
                # accepts_focus: False
                readonly: True
                font_size: input.options['fontsize']
                size_hint: 1, None
                line_height: 1.1
                # for kivy < 1.8
                height: max( (len(self._lines)+1) * self.line_height, scrlv.height)
                # for kivy >= 1.8
                # height: max(self.minimum_height, scrlv.height)
                scroll_y: 1
        ETMTextInput:
            id: input
            input_wid: input
            output_wid: output
            scroll_wid: scrlv
            # status_wid: status
            size_hint_y: None
            height: 30
            hint_text: 'Enter ? for help'
            focus: True
            multiline: True
            output_text: output.text
