#:import TextInput kivy.uix.textinput.TextInput
#:import CodeInput kivy.uix.codeinput.CodeInput
#:import TextLexer pygments.lexers.special.TextLexer
#:import RstDocument kivy.uix.rst.RstDocument
#:import ScrollView kivy.uix.scrollview.ScrollView
#:import Label kivy.uix.label.Label
#:import get_current_time etmKv.etmData.get_current_time


<BoxIOWidget>:

    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: .8, .8, .8, 1
            Rectangle:
                # self here refers to the widget i.e FloatLayout
                pos: self.pos
                size: self.size
        padding: 3
        spacing: 3
        # input_wid: input
        ETMTextInput:
            id: input
            # canvas.before:
            #     Color:
            #         rgba: 1, 1, 1, 1
            #     Rectangle:
            #         pos: self.pos
            #         size: self.size
            output_wid: output
            status_wid: status
            size_hint_y: None
            height: 30
            hint_text: 'command'
            focus: True
            multiline: True
            output_text: output.text
        ScrollView:
            id: scrlv
            focus: False
            CodeInput:
                id: output
                background_color: [1, 1, 1, 1]
                # border: [16, 16, 32, 16]
                lexer: TextLexer()
                text: input.init()
                focus: False
                readonly: True
                size_hint: 1, None
                line_spacing: .2
                font_size: input.options['fontsize']
                # height: max( (len(self._lines)+1) * self.line_height, scrlv.height)
                height: max(self.minimum_height, scrlv.height)
                scroll_y: 1
        Label:
            id: status
            focus: False
            size_hint_y: None
            height: 20
            font_size: '14sp'
            color: [0, 0, 0, 1]
            text: ''
            # text: get_current_time().strftime(input_wid.options['reprdatetime'])
